<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  
  <link rel="stylesheet" href="/lib/animate-css/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"8.0.0-rc.4","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}}};
  </script>

  <meta name="description" content="全文共4341字，推荐阅读时间30~45分钟。">
<meta property="og:type" content="article">
<meta property="og:title" content="Database-Chapter5-关系数据理论">
<meta property="og:url" content="http://yoursite.com/2021/01/12/Database-Chapter5-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/index.html">
<meta property="og:site_name" content="Silence">
<meta property="og:description" content="全文共4341字，推荐阅读时间30~45分钟。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-01-12T10:09:10.944Z">
<meta property="article:modified_time" content="2021-01-12T10:12:42.792Z">
<meta property="article:author" content="Silence">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2021/01/12/Database-Chapter5-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Database-Chapter5-关系数据理论 | Silence</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Silence" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <main class="main">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Silence</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-lover">

    <a href="/lover/" rel="section"><i class="fa fa-heart fa-fw"></i>lover</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
  </ul>
</nav>




</div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数依赖"><span class="nav-number">2.</span> <span class="nav-text">函数依赖</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义"><span class="nav-number">2.1.</span> <span class="nav-text">定义</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#术语"><span class="nav-number">2.1.1.</span> <span class="nav-text">术语</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#属性联系"><span class="nav-number">2.1.2.</span> <span class="nav-text">属性联系</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分类"><span class="nav-number">2.1.3.</span> <span class="nav-text">分类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关系键"><span class="nav-number">2.2.</span> <span class="nav-text">关系键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑蕴涵"><span class="nav-number">2.3.</span> <span class="nav-text">逻辑蕴涵</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Armstrong公理系统"><span class="nav-number">2.4.</span> <span class="nav-text">Armstrong公理系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#闭包"><span class="nav-number">2.5.</span> <span class="nav-text">闭包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数依赖集"><span class="nav-number">2.6.</span> <span class="nav-text">函数依赖集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#定义-1"><span class="nav-number">2.6.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#极小化"><span class="nav-number">2.6.2.</span> <span class="nav-text">极小化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#规范化"><span class="nav-number">3.</span> <span class="nav-text">规范化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#范式-Normal-Form"><span class="nav-number">3.1.</span> <span class="nav-text">范式(Normal Form)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#分级"><span class="nav-number">3.1.1.</span> <span class="nav-text">分级</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多值依赖"><span class="nav-number">4.</span> <span class="nav-text">多值依赖</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义-2"><span class="nav-number">4.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#性质"><span class="nav-number">4.2.</span> <span class="nav-text">性质</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第四范式-4NF"><span class="nav-number">4.3.</span> <span class="nav-text">第四范式(4NF)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模式分解理论"><span class="nav-number">5.</span> <span class="nav-text">模式分解理论</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义-3"><span class="nav-number">5.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#无损连接性"><span class="nav-number">5.2.</span> <span class="nav-text">无损连接性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#保持函数依赖性"><span class="nav-number">5.3.</span> <span class="nav-text">保持函数依赖性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原则"><span class="nav-number">5.4.</span> <span class="nav-text">原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分解算法"><span class="nav-number">5.5.</span> <span class="nav-text">分解算法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#候选码求解"><span class="nav-number">6.</span> <span class="nav-text">候选码求解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#单属性"><span class="nav-number">6.1.</span> <span class="nav-text">单属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#分类-1"><span class="nav-number">6.1.1.</span> <span class="nav-text">分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#求解"><span class="nav-number">6.1.2.</span> <span class="nav-text">求解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#判定"><span class="nav-number">6.1.3.</span> <span class="nav-text">判定</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多属性"><span class="nav-number">6.2.</span> <span class="nav-text">多属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#应用"><span class="nav-number">7.</span> <span class="nav-text">应用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">8.</span> <span class="nav-text">Reference</span></a></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Silence"
      src="https://i.loli.net/2020/07/05/Ml7X4UshoCJgn52.jpg">
  <p class="site-author-name" itemprop="name">Silence</p>
  <div class="site-description" itemprop="description">I'm right here waiting for you.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">69</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/SilenceX12138" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;SilenceX12138" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/silencejiang12138" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;silencejiang12138" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



      </section>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </header>

      
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div id="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner">
        

        <div class="content post posts-expand">
          

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/12/Database-Chapter5-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/07/05/Ml7X4UshoCJgn52.jpg">
      <meta itemprop="name" content="Silence">
      <meta itemprop="description" content="I'm right here waiting for you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Database-Chapter5-关系数据理论
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-12 18:09:10 / Modified: 18:12:42" itemprop="dateCreated datePublished" datetime="2021-01-12T18:09:10+08:00">2021-01-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2021/01/12/Database-Chapter5-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/01/12/Database-Chapter5-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>全文共<code>4341</code>字，推荐阅读时间<code>30~45</code>分钟。</p>
<a id="more"></a>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>数据依赖：影响<strong>模式质量</strong>的因素<ul>
<li>关系内部属性之间的约束关系</li>
<li>分类<ul>
<li>函数依赖</li>
<li>多值依赖</li>
</ul>
</li>
</ul>
</li>
<li>范式理论：衡量模式质量的标准</li>
<li>规范化方法与算法：提升模式质量的办法</li>
</ul>
<h2 id="函数依赖"><a href="#函数依赖" class="headerlink" title="函数依赖"></a>函数依赖</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li><p>给定属性集$U$，及其子集$X$，$Y$，$R(U)$是其上的<strong>关系模式</strong>（域名元组），$r$是$R$的<strong>任意一个</strong>具体关系（填入了任意的具体内容），$t$，$s$是$r$中<strong>任意</strong>两个元组。</p>
<ul>
<li>如果$t[X]=s[X]$，则$t[Y]=s[Y]$.此时称“$X$函数确定$Y$”或“$Y$函数依赖于$X$”，记作$X\rightarrow Y$.</li>
</ul>
<blockquote>
<p>等价定义：对于$X$的每个具体值，$Y$有唯一的值与之对应。</p>
</blockquote>
</li>
<li><p>函数依赖属于<strong>语义</strong>范畴</p>
</li>
<li><p>函数依赖具有时间稳定性，<strong>不随</strong>时间改变。</p>
<blockquote>
<p><code>r</code>（具体关系）可能会发生变化，但是函数依赖<strong>不会</strong>发生改变。</p>
</blockquote>
</li>
</ul>
<h4 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h4><ul>
<li>平凡依赖：若$Y\subseteq X$，则$X\rightarrow Y$是平凡依赖。</li>
<li>非平凡</li>
<li>决定因素：$X$被称为决定因素</li>
</ul>
<h4 id="属性联系"><a href="#属性联系" class="headerlink" title="属性联系"></a>属性联系</h4><ul>
<li><code>1:1</code>：$X\rightarrow Y,Y \rightarrow X$，即两者<strong>相互决定</strong>。</li>
<li><code>1:n</code>：<code>n</code>端项($X$)决定<code>1</code>端项($Y$)，即$X\rightarrow Y$.</li>
<li><code>m:n</code>：两者之间<strong>不存在</strong>函数依赖</li>
</ul>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ul>
<li><p>完全：$X$的<strong>任意</strong>真子集（除空集）都<strong>不能够</strong>确定$Y$，记为$X \rightarrow Y$（箭头上有一个<code>f</code>）。</p>
</li>
<li><p>部分：$X\rightarrow Y$（箭头上有一个<code>p</code>）</p>
</li>
<li><p>传递：若$X\rightarrow Y(Y\nsubseteq X),Y\rightarrow Z(Z\nsubseteq Y)$，且$Y$<strong>不确定</strong>$X$，则称为$Z$对$X$<strong>传递</strong>函数依赖（箭头上有一个<code>t</code>）。</p>
<blockquote>
<ul>
<li>如果$Y$可以确定$X$，则$Z$对$X$是<strong>直接</strong>依赖（因为可以归为以上三种类型之一，因此<strong>不是</strong>独立的类型）。</li>
<li>注意传递依赖要求两个函数依赖都是<strong>非平凡</strong>的</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="关系键"><a href="#关系键" class="headerlink" title="关系键"></a>关系键</h3><ul>
<li>候选码：设$K$是$R<U,F>$（$F$是属性集$U$上的函数依赖<strong>集</strong>）的属性或属性组合，若$U$<strong>完全依赖</strong>于$K$，则称$K$是$R$的候选码。当候选码多于一个时，选定其中一个作为主码。</li>
<li>性质<ul>
<li>唯一性</li>
<li>最小性</li>
</ul>
</li>
<li>属性分类<ul>
<li>主属性：包含在<strong>任一候选码</strong>中的属性</li>
<li>非主属性：不包含在任何候选码中的属性</li>
</ul>
</li>
<li>外码：关系模式$R$中的属性或属性组$X$并非$R$的码，但$X$是另一个关系模式的码，则称$X$是$R$的外码。</li>
</ul>
<h3 id="逻辑蕴涵"><a href="#逻辑蕴涵" class="headerlink" title="逻辑蕴涵"></a>逻辑蕴涵</h3><ul>
<li>通过函数依赖集$F$能够推出$X\rightarrow Y$，则称$F$逻辑蕴涵$X\rightarrow Y$.</li>
<li>$F$的闭包：$F$蕴涵的<strong>全体函数依赖</strong>称为$F$的闭包，记为$F^+$.</li>
</ul>
<h3 id="Armstrong公理系统"><a href="#Armstrong公理系统" class="headerlink" title="Armstrong公理系统"></a>Armstrong公理系统</h3><ul>
<li><p>定律（可从蕴涵定义出发证明）</p>
<p>对$R<U,F>$</p>
<ul>
<li><p>自反律：属性集蕴涵其<strong>子集</strong></p>
</li>
<li><p>增广率：对属性$Z\subseteq U$，若$X\rightarrow Y$，则$XZ\rightarrow YZ$.</p>
<blockquote>
<p>$XZ$：将两个属性组<strong>直接拼接</strong></p>
</blockquote>
</li>
<li><p>传递率</p>
</li>
</ul>
</li>
<li><p>推论</p>
<ul>
<li>合并：若$X\rightarrow Y, X\rightarrow Z$，则$X\rightarrow YZ$.</li>
<li>伪传递：若$X \rightarrow Y, WY\rightarrow Z$，则$WX\rightarrow Z$.</li>
<li>分解：若$X\rightarrow Y$且$Z\subseteq Y$，则$X \rightarrow Z$.</li>
</ul>
</li>
<li><p>定理</p>
<p>$X\rightarrow A_1A_2…A_k \Longleftrightarrow X\rightarrow A_i(i=1,2,…,k)$</p>
</li>
<li><p>属性集闭包：$X\subseteq U$，将所有从$X$出发，通过$F$能够导出的<strong>属性的集合</strong>，记为$X_F^+$.</p>
<ul>
<li>$K_F^+=U$，即通过主码能够推出全体属性。</li>
<li>定理：$X\rightarrow Y \Longleftrightarrow Y\subseteq X_F^+$</li>
</ul>
</li>
<li><p>有效性（正确性）：从$F$出发，根据Armstrong公理导出的所有函数依赖一定在$F$蕴涵的<strong>全体函数依赖</strong>中</p>
</li>
<li><p>完备性（实用性）：$F^+$一定可以由Armstrong公理系统导出</p>
<blockquote>
<p>证明逆否命题：如果$X\rightarrow Y$不能用Armstrong公理从$F$中导出，则它一定不被$F$逻辑蕴涵。（即不属于该函数依赖集合下的关系模式）</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>Armstrong公理系统是一种操作$F$的方式，还可以有其他公理系统，<strong>不</strong>影响$F$本身的存在。</p>
</blockquote>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>算法：求$X_F^+$</p>
<ul>
<li>以$X$为起始属性集，对其所有<strong>子集</strong>（不只是元素）进行迭代推导。</li>
<li>属性集在某一次迭代中没有更新或者等于全集$U$时终止算法</li>
</ul>
<blockquote>
<p>闭包表示</p>
<ul>
<li>函数依赖闭包$F^+$：<code>{}</code></li>
<li>属性集闭包$X_F^+$：<strong>直接列举元素</strong>，外层不需要<code>{}</code>或<code>()</code>修饰。</li>
</ul>
</blockquote>
<h3 id="函数依赖集"><a href="#函数依赖集" class="headerlink" title="函数依赖集"></a>函数依赖集</h3><h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><ul>
<li>对于$F,G$，若$F^+=G^+$，即两者能推出的全体函数依赖相同，则称两者等价。<ul>
<li>此时称$F$和$G$相互覆盖</li>
<li>$F^+=G^+\Longleftrightarrow F \subseteq G^+ \Longleftrightarrow G \subseteq F^+$</li>
</ul>
</li>
<li>最小依赖集<ul>
<li>右部单属性化：$F$中任一函数依赖$X\rightarrow A$，$A$必是单属性。</li>
<li>函数依赖<strong>左部</strong>没有多余属性：<strong>不存在</strong>部分函数依赖</li>
<li>没有多余的函数依赖：$F$中<strong>不存在</strong>可以被其他函数依赖导出的函数依赖</li>
</ul>
</li>
</ul>
<h4 id="极小化"><a href="#极小化" class="headerlink" title="极小化"></a>极小化</h4><ul>
<li><p>定理：每个函数依赖集$F$<strong>均等价于</strong>一个极小函数依赖集$Fm$</p>
</li>
<li><p>算法</p>
<ul>
<li><p>对于<strong>右部</strong>是属性集合的函数依赖进行分解，转换为<strong>多个</strong>单属性依赖。</p>
</li>
<li><p>对于<strong>左部</strong>是属性集合的函数依赖，对左侧进行消融检查。对于消融后函数依赖不受影响属性，均从左侧属性集中删除<strong>并更新迭代集</strong>。</p>
<blockquote>
<p>也可能消融实验后，左部依然是属性组。</p>
</blockquote>
</li>
<li><p>对于<strong>每个函数依赖</strong>做消融检查，如果消融某个依赖后依然可以推导出该函数依赖，则可以将该函数依赖删除<strong>并更新迭代集</strong>。</p>
<ul>
<li>算法一：转化为图的连通性判定</li>
<li>算法二：求该函数依赖左侧属性<strong>新的属性集闭包</strong>，判断是否包含该消融函数依赖的右侧元素。</li>
</ul>
</li>
</ul>
<blockquote>
<p>对于算法的2，3步而言，如果消融的顺序不一样，可能会得到不一样的$Fm$，即$Fm$不唯一。</p>
</blockquote>
</li>
</ul>
<h2 id="规范化"><a href="#规范化" class="headerlink" title="规范化"></a>规范化</h2><ul>
<li>目的：消除冗余和异常</li>
<li>思想：“一事一地”，一个关系只描述一个实体或者实体间的一种联系。</li>
<li>消除部分函数依赖和传递函数依赖</li>
</ul>
<h3 id="范式-Normal-Form"><a href="#范式-Normal-Form" class="headerlink" title="范式(Normal Form)"></a>范式(Normal Form)</h3><ul>
<li>一个关系满足的某个<strong>指定的约束集</strong></li>
<li>各级范式联系：$5NF \sub 4NF\sub BCNF \sub 3CNF \sub 2NF \sub 1NF$（反证法）</li>
<li>规范化：通过<strong>模式分解</strong>将低级范式的关系模式提升到更高的范式等级</li>
</ul>
<h4 id="分级"><a href="#分级" class="headerlink" title="分级"></a>分级</h4><ul>
<li><p>第一范式(1NF)：最低要求，满足的关系被称为<strong>规范化关系</strong>。</p>
<ul>
<li>一个关系只包含原子值（属性<strong>不可</strong>再分）</li>
</ul>
</li>
<li><p>第二范式(2NF)</p>
<ul>
<li><p>$R\in 1NF$，并且每个<strong>非主属性完全依赖</strong>于码，则称$R\in2NF$.</p>
</li>
<li><p><strong>允许主属性部分依赖于码</strong></p>
<blockquote>
<ul>
<li>任一主属性<strong>均部分依赖</strong>于码</li>
<li>某些所有属性都是主属性，但是码<strong>不是</strong>全体主属性的情况，例如<code>STC(S, T, C)</code>.</li>
</ul>
</blockquote>
</li>
<li><p>如果$R$的全体属性都是主属性，则$R\in 2NF$.</p>
</li>
<li><p>从$1NF$中消除非主属性对码的部分函数依赖即可升级为2NF</p>
<ul>
<li>画函数依赖图</li>
<li>投影分解法（选择部分列）</li>
</ul>
</li>
</ul>
</li>
<li><p>第三范式(3NF)</p>
<ul>
<li><p>若$R\in2NF$，并且每个<strong>非主属性</strong>都<strong>不传递依赖</strong>于$R$的任何码，则$R\in3NF$.</p>
<ul>
<li><p>推论：若非主属性$Z$<strong>部分依赖</strong>于码$X$，则$R\notin 3NF$.</p>
<blockquote>
<p>此时$R\notin 2NF$</p>
</blockquote>
</li>
</ul>
</li>
<li><p>投影分解法</p>
</li>
</ul>
</li>
<li><p>BCNF</p>
<ul>
<li><p>3NF<strong>没有限制主属性</strong>对码的<strong>部分及传递函数依赖</strong>，依然会在某些情况下带来异常。</p>
</li>
<li><p>若$R\in 1NF$，对任意函数依赖$X\to Y$，且$Y\nsubseteq X$时，$X$必含有码，则$R\in BCNF$.</p>
<blockquote>
<p>等价定义：BCNF中任意<strong>非平凡</strong>函数依赖的<strong>左部</strong>含有码</p>
</blockquote>
</li>
<li><p>性质（反证法）</p>
<ul>
<li><p><strong>所有</strong>非主属性<strong>完全函数依赖</strong>于任一候选码(2NF)</p>
</li>
<li><p><strong>所有</strong>主属性<strong>完全函数依赖</strong>于每个<strong>不包含它</strong>的候选码(BCNF)</p>
</li>
<li><p><strong>没有</strong>属性<strong>完全函数依赖</strong>于非码的任意属性组(3NF, BCNF)</p>
<blockquote>
<p>如果没有完全函数依赖，则不可能有部分函数依赖。</p>
</blockquote>
</li>
<li><p>全码（所有属性一起作为码的关系模式）关系就是BCNF</p>
</li>
</ul>
</li>
<li><p>BCNF是只考虑函数依赖的<strong>最高标准</strong></p>
<blockquote>
<p>和多值依赖对应，不是指保持函数依赖。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="多值依赖"><a href="#多值依赖" class="headerlink" title="多值依赖"></a>多值依赖</h2><h3 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h3><ul>
<li><p>给定属性组$X$，$Y$，$Z$，满足$Z=U-X-Y$.当给定一组$(x,z)$可以得到一个$Y$的取值集合，若该集合与$X$有关而与$Z$无关，则称$Y$多值依赖于$X$，记为$X\to \to Y$.</p>
<blockquote>
<ul>
<li>即$(x,z)$中$z$任意变化对$Y$的取值集合<strong>没有</strong>影响，由$X$确定了$Y$的一组取值。</li>
<li>因为一个自变量对应了多个因变量，因此叫做多值依赖而不是函数依赖。</li>
<li>函数依赖是多值依赖的特殊情况。</li>
</ul>
</blockquote>
</li>
<li><p>有效性范围</p>
</li>
<li><p>现实场景：各个域之间均为多对多关系，即<strong>不能够</strong>提取出函数依赖关系的模式。</p>
</li>
</ul>
<h3 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h3><p>给定$Z=U-X-Y$</p>
<ul>
<li><p>对称性：若$X\to \to Y$，则$X\to\to Z$.</p>
</li>
<li><p>若$X\to Y$，则$X\to\to Y$，即函数依赖可以看作多值依赖的特例。</p>
</li>
<li><p>平凡：若$X\to\to Y$，且$Z= \phi$.</p>
<blockquote>
<p>即$U$只被划分为了$X$和$Y$</p>
</blockquote>
</li>
<li><p>非平凡：若$X\to\to Y$，且$Z\neq \phi$.</p>
</li>
</ul>
<h3 id="第四范式-4NF"><a href="#第四范式-4NF" class="headerlink" title="第四范式(4NF)"></a>第四范式(4NF)</h3><ul>
<li><p>对任意<strong>非平凡</strong>多值依赖$X\to\to Y(Y\nsubseteq X)$，$X$都含有码，则称$R\in 4NF$.</p>
<blockquote>
<p>若关系已经满足BCNF，且所有的多值依赖都是平凡的，则关系也满足4NF.</p>
</blockquote>
</li>
<li><p>意义：降低数据冗余程度，减少修改异常。</p>
</li>
</ul>
<h2 id="模式分解理论"><a href="#模式分解理论" class="headerlink" title="模式分解理论"></a>模式分解理论</h2><ul>
<li><p>目的：通过模式分解，将关系模式的范式等级提高，同时保有原关系模式的一定信息。</p>
<blockquote>
<p>如果不保有信息，分解是没有意义的。因此，所有的分解算法都和性质的保持有关。</p>
</blockquote>
</li>
</ul>
<h3 id="定义-3"><a href="#定义-3" class="headerlink" title="定义"></a>定义</h3><p>分解$\rho=\{R_1<U_1,F_1>,R_2<U_2,F_2>,…,R_n<U_n,F_n>\}$，满足：</p>
<ul>
<li><p>$U=\bigcup_{i=1}^n U_i$，且$\forall 1\leq i,j \leq n,U_i\nsubseteq U_j$.</p>
<blockquote>
<p>可以相交但<strong>不能</strong>包含</p>
</blockquote>
</li>
<li><p>$F_i$是$F$在$U_i$上的一个投影，即选择了$F^+$中相关属性<strong>都在</strong>$U_i$中($XY\subseteq U_i)$的函数依赖作为$F_i$.（可以只选择一部分，不一定全选）</p>
</li>
<li><p>表示</p>
<p>$\rho=\{R_1&lt;\{Sno,Sdept\},\{Sno \to Sdept\}&gt;,R_2&lt;\{Sno,Mname\},\{Sno \to Mname\}&gt; \}$</p>
</li>
</ul>
<h3 id="无损连接性"><a href="#无损连接性" class="headerlink" title="无损连接性"></a>无损连接性</h3><ul>
<li><p>将分解后的关系模式做<strong>自然连接</strong>得到合成的新关系模式，如果新关系模式中的关系和分解前的原关系模式中的关系逐一相等，则称该分解$\rho$具有无损连接性，记为<strong>无损分解</strong>。</p>
</li>
<li><p>判定</p>
<ul>
<li><p>算法</p>
</li>
<li><p>定理（无损连接性的充要条件）：以分解为两个子模式为例，若$R_1$和$R_2$的共同属性<strong>至少构成二者之一</strong>的候选码，则为无损分解。</p>
<blockquote>
<p>扩展为<code>n</code>个子关系模式：将子模式间<strong>两两进行比较</strong>，若<strong>所有</strong>的比较都满足以上条件，则该分解无损连接性。（每一次都是无损连接，则合成后的连接也是无损连接）</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="保持函数依赖性"><a href="#保持函数依赖性" class="headerlink" title="保持函数依赖性"></a>保持函数依赖性</h3><ul>
<li>若$F^+=(\bigcup_{i=1}^nF_i)^+$，即两个函数依赖集等价，则称$\rho$是保持函数依赖性的分解。</li>
<li>判定：设$G=(\bigcup_{i=1}^nF_i)$，$G\subseteq F^+$一定成立，则只需要判断$F^+\subseteq G$是否成立。<ul>
<li>$\forall (X\to Y) \in F$，判断$Y$是否属于$X_G^+$.</li>
<li>对于$F$中的每个函数依赖，判断是否可以从$G$中的函数依赖导出。</li>
</ul>
</li>
</ul>
<blockquote>
<p>分解$\rho$可以无损连接性和保持函数依赖性，也可以只满足其中一个，也可以同时都不满足。</p>
</blockquote>
<h3 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h3><ul>
<li>规范化过程中采用的投影分解可能不唯一，但是好的无损分解应该无损连接并且保持函数依赖。</li>
<li>若要保持函数依赖，则最高可能只能到3NF.（BCNF的粒度过小，可能<strong>不保持</strong>函数依赖）</li>
<li>若要进行无损分解，则可以到达4NF或更高。</li>
</ul>
<blockquote>
<ul>
<li>模式分解是在求当前模式的“数据等价子集”，在保证<strong>数据完整性（无损连接）</strong>的条件下尽可能地减小单个模式的复杂度，因此某些不影响数据完整性的函数依赖可能被舍弃。</li>
<li>大多数情况下，3NF是最为合适的规范化等级，因为它是能够无损连接并且保持函数依赖的最高等级。</li>
</ul>
</blockquote>
<h3 id="分解算法"><a href="#分解算法" class="headerlink" title="分解算法"></a>分解算法</h3><ul>
<li><p>3NF+函数依赖</p>
<ul>
<li><p>对$F$进行<strong>极小化</strong>处理，记为$F$.</p>
</li>
<li><p>将<strong>不在</strong>$F$中出现的属性从$U$中删除，记为$U$.</p>
<blockquote>
<p>删除了部分元素，所以<strong>不具有</strong>无损连接性。</p>
</blockquote>
</li>
<li><p>若$F$只有一个函数依赖，则$\rho=\{R\}$.</p>
</li>
<li><p>对$F$按照<strong>“具有相同左部”</strong>的原则进行分组，由$F_i$求出$U_i$，则$\rho=\{R_1<U_1,F_1>,…R_k<U_k,F_k>\}$为所求。</p>
</li>
</ul>
</li>
<li><p>3NF+无损连接性+函数依赖</p>
<p>从<strong>满足保持函数依赖</strong>的分解$\rho$出发，设$X$是$R<U,F>$的码。</p>
<ul>
<li><p>若$\exist U_i, X\subseteq U_i$，则$\rho$为所求。</p>
</li>
<li><p>否则，令$\tau=\rho \cup\{R^*<X,F_X>\}$，则$\tau$为所求。</p>
<blockquote>
<ul>
<li>$F_X$是以$X$为属性集的函数依赖的投影</li>
<li>$X_F$是属性$X$蕴涵的属性集</li>
<li>在满足函数依赖的算法中，删去了<strong>不出现</strong>在$F$中的属性，但是它们是<strong>主属性</strong>，因此通过$X$对无损连接性进行了恢复。</li>
<li>注意，$\tau$求解时是直接把$R^<em>$并入，而<em>*不是</em></em>把$X$添加进$U_i$.</li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p>BCNF+无损连接性</p>
<p>设$\rho$中$R_i<U_i,F_i>\notin BCNF$</p>
<ul>
<li>则$R_i$中存在$X\to A\in F_i^+(A\notin X)$，且$X$不是$R_i$的码（也不含有），则$XA$是$U_i$的真子集，将$R_i$分解为$\sigma=\{S_1,S_2\}$，其中$U_{S_1}=XA$，$U_{S_2}=U_i-\{A\}$.</li>
</ul>
<blockquote>
<p>$A$是<strong>单属性</strong>，而<strong>不是</strong>属性组。</p>
</blockquote>
<ul>
<li><p>使用$\sigma$进行迭代，直到$\sigma \in BCNF$.</p>
<blockquote>
<p>相当于逐步分离不符合BCNF的函数依赖</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="候选码求解"><a href="#候选码求解" class="headerlink" title="候选码求解"></a>候选码求解</h2><h3 id="单属性"><a href="#单属性" class="headerlink" title="单属性"></a>单属性</h3><h4 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h4><ul>
<li>$L$：<strong>仅</strong>出现在左部</li>
<li>$R$：<strong>仅</strong>出现在右部</li>
<li>$N$：两边均未出现</li>
<li>$LR$：两边均出现</li>
</ul>
<blockquote>
<p>以上是<strong>属性</strong>分类，而不是<strong>属性组</strong>分类。</p>
<p>例如，$BC\to A$和$C\to B$均成立时，$BC\notin L$.</p>
</blockquote>
<h4 id="求解"><a href="#求解" class="headerlink" title="求解"></a>求解</h4><ul>
<li>L类属性一定是<strong>所有候选码</strong>中的成员（<strong>强于</strong>主属性）<ul>
<li>若L类属性能够推出全体属性，则该属性单独作为候选码，且由码的极小性，该候选码唯一，即<strong>主码</strong>为该属性。</li>
</ul>
</li>
<li>R类属性一定<strong>不是</strong>任意候选码成员</li>
<li>N类属性一定是<strong>所有候选码</strong>中的成员<ul>
<li>若L和N类属性组成的集合能够推出全体属性，则该属性集是<strong>主码</strong>。</li>
</ul>
</li>
</ul>
<h4 id="判定"><a href="#判定" class="headerlink" title="判定"></a>判定</h4><p>将<strong>单属性依赖</strong>关系模式转换为图$G(U,F)$，其中$F$为有向边集合，表示<strong>单属性</strong>函数依赖。</p>
<ul>
<li>关键点（原始点+孤立点）对应的属性必在$R$的任何候选码中</li>
<li>属性集$X$是$R$的唯一候选码$\Leftrightarrow$X能到达$G$中的任一结点<ul>
<li>在单属性条件下，即不存在独立回路。</li>
</ul>
</li>
<li>对途中点而言，成为候选码成员$\Leftrightarrow$途中点是独立回路中的结点。</li>
<li>对于存在独立回路的关系模式而言，候选码=关键属性集+独立回路笛卡尔积中的任意元素。</li>
</ul>
<h3 id="多属性"><a href="#多属性" class="headerlink" title="多属性"></a>多属性</h3><ul>
<li><p>$X=L\cup N，Y=LR$.</p>
</li>
<li><p>判断$X$是否可以推出全体属性集，如果不可以的话就从$Y$中取一个并进$X$，然后再次判断。</p>
</li>
<li><p>依次迭代取的个数，直到能够推出全体属性。</p>
<blockquote>
<ul>
<li>这是一个穷举算法，取两个不只是在取的第一个的基础上再取，而是遍历所有取两个的情况。</li>
<li>证明了独立回路存在时，主码$K\neq L\cup N$.</li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><ul>
<li>通过最小函数依赖集消除<strong>冗余</strong>联系</li>
<li>$D=F-F_m$中的函数依赖<strong>不一定</strong>是冗余的，因此除了$F_m$中的函数依赖外，可能$D$中也有需要保留的函数依赖。</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>BUAA Database Theory Lecture, Autumn of 2020.</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/12/Database-Chapter4-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/" rel="prev" title="Database-Chapter4-数据库设计">
      <i class="fa fa-chevron-left"></i> Database-Chapter4-数据库设计
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/12/Database-Chapter6-%E5%85%B3%E7%B3%BB%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86%E4%B8%8E%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/" rel="next" title="Database-Chapter6-关系查询处理与查询优化">
      Database-Chapter6-关系查询处理与查询优化 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



        </div>
        
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Silence</span>
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  Visitors: <span id="busuanzi_value_site_pv"></span>
</span>
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">|   total: 120.2k words</span>
</div>
  <div class="powered-by">
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  













<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', () => {
    new Valine(Object.assign({
      el  : '#valine-comments',
      path: location.pathname,
    }, {"enable":true,"appId":"GMneVEFPu4TwpvejAPqllWGc-gzGzoHsz","appKey":"5eNvc7SV1dxRT000WSXjRDuD","placeholder":"Just write what you'd like to write.","avatar":"mm","meta":["nick","mail"],"pageSize":10,"language":"en","visitor":false,"comment_count":true,"recordIP":false,"serverURLs":null}
    ));
  }, window.Valine);
});
</script>

</body>
</html>

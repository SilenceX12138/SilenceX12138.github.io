<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  
  <link rel="stylesheet" href="/lib/animate-css/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"8.0.0-rc.4","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}}};
  </script>

  <meta name="description" content="Chapter4 数据库设计全文共2640字，推荐阅读时间20~25分钟。 概述设计方法 直接设计法（手工试凑） 高度依赖开发人员经验 后期维护困难 移植困难 难以合作设计   规范设计法 将设计过程分为若干个阶段，每个阶段只解决整个设计中的部分问题。 需求分析：调查应用环境 概念结构设计（在三级模式两级映象中没有对应的部分）：形成可以用E-R图表示的模型 逻辑结构设计（概念模型，即模式、信息世界">
<meta property="og:type" content="article">
<meta property="og:title" content="Database-Chapter4-数据库设计">
<meta property="og:url" content="http://yoursite.com/2021/01/12/Database-Chapter4-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/index.html">
<meta property="og:site_name" content="Silence">
<meta property="og:description" content="Chapter4 数据库设计全文共2640字，推荐阅读时间20~25分钟。 概述设计方法 直接设计法（手工试凑） 高度依赖开发人员经验 后期维护困难 移植困难 难以合作设计   规范设计法 将设计过程分为若干个阶段，每个阶段只解决整个设计中的部分问题。 需求分析：调查应用环境 概念结构设计（在三级模式两级映象中没有对应的部分）：形成可以用E-R图表示的模型 逻辑结构设计（概念模型，即模式、信息世界">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-01-12T10:09:10.942Z">
<meta property="article:modified_time" content="2020-10-23T09:06:33.383Z">
<meta property="article:author" content="Silence">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2021/01/12/Database-Chapter4-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Database-Chapter4-数据库设计 | Silence</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Silence" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <main class="main">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Silence</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-lover">

    <a href="/lover/" rel="section"><i class="fa fa-heart fa-fw"></i>lover</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
  </ul>
</nav>




</div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter4-数据库设计"><span class="nav-number">1.</span> <span class="nav-text">Chapter4 数据库设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#设计方法"><span class="nav-number">1.1.1.</span> <span class="nav-text">设计方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#需求分析"><span class="nav-number">1.2.</span> <span class="nav-text">需求分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#目标"><span class="nav-number">1.2.1.</span> <span class="nav-text">目标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法"><span class="nav-number">1.2.2.</span> <span class="nav-text">方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#概念结构设计"><span class="nav-number">1.3.</span> <span class="nav-text">概念结构设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#E-R法"><span class="nav-number">1.3.1.</span> <span class="nav-text">E-R法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#E-R图概述"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">E-R图概述</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#E-R图设计"><span class="nav-number">1.3.2.</span> <span class="nav-text">E-R图设计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#方法-1"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实现"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">实现</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#数据抽象"><span class="nav-number">1.3.2.2.1.</span> <span class="nav-text">数据抽象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#步骤"><span class="nav-number">1.3.2.2.2.</span> <span class="nav-text">步骤</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逻辑结构设计"><span class="nav-number">1.4.</span> <span class="nav-text">逻辑结构设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#E-R图与关系模型"><span class="nav-number">1.4.1.</span> <span class="nav-text">E-R图与关系模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#普适转换规则"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">普适转换规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#弱实体"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">弱实体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#超类-子类联系"><span class="nav-number">1.4.1.3.</span> <span class="nav-text">超类&#x2F;子类联系</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#规范化"><span class="nav-number">1.4.2.</span> <span class="nav-text">规范化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化"><span class="nav-number">1.4.3.</span> <span class="nav-text">优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#水平分解"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">水平分解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#垂直分解"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">垂直分解</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设计用户子模式"><span class="nav-number">1.4.4.</span> <span class="nav-text">设计用户子模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#物理结构设计"><span class="nav-number">1.5.</span> <span class="nav-text">物理结构设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#存储结构"><span class="nav-number">1.5.1.</span> <span class="nav-text">存储结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存取方法"><span class="nav-number">1.5.2.</span> <span class="nav-text">存取方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#索引"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#聚集"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">聚集</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HASH文件"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">HASH文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">1.6.</span> <span class="nav-text">Reference</span></a></li></ol></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Silence"
      src="https://i.loli.net/2020/07/05/Ml7X4UshoCJgn52.jpg">
  <p class="site-author-name" itemprop="name">Silence</p>
  <div class="site-description" itemprop="description">I'm right here waiting for you.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/SilenceX12138" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;SilenceX12138" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/silencejiang12138" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;silencejiang12138" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



      </section>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </header>

      
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div id="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner">
        

        <div class="content post posts-expand">
          

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/12/Database-Chapter4-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/07/05/Ml7X4UshoCJgn52.jpg">
      <meta itemprop="name" content="Silence">
      <meta itemprop="description" content="I'm right here waiting for you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Database-Chapter4-数据库设计
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-12 18:09:10" itemprop="dateCreated datePublished" datetime="2021-01-12T18:09:10+08:00">2021-01-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-23 17:06:33" itemprop="dateModified" datetime="2020-10-23T17:06:33+08:00">2020-10-23</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2021/01/12/Database-Chapter4-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/01/12/Database-Chapter4-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Chapter4-数据库设计"><a href="#Chapter4-数据库设计" class="headerlink" title="Chapter4 数据库设计"></a>Chapter4 数据库设计</h1><p>全文共<code>2640</code>字，推荐阅读时间<code>20~25</code>分钟。</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="设计方法"><a href="#设计方法" class="headerlink" title="设计方法"></a>设计方法</h3><ul>
<li>直接设计法（手工试凑）<ul>
<li>高度依赖开发人员经验</li>
<li>后期维护困难</li>
<li>移植困难</li>
<li>难以合作设计</li>
</ul>
</li>
<li>规范设计法<ul>
<li>将设计过程分为若干个阶段，每个阶段只解决整个设计中的部分问题。<ul>
<li>需求分析：调查应用环境</li>
<li>概念结构设计（在三级模式两级映象中<strong>没有</strong>对应的部分）：形成可以<strong>用E-R图</strong>表示的模型</li>
<li>逻辑结构设计（<strong>概念模型</strong>，即模式、信息世界）：将E-R图转换成DBMS的模式和子模式</li>
<li>物理结构设计（<strong>数据模型</strong>，即内模式、机器世界）：存储结构（内模式）和存取方法（例如索引）</li>
<li>数据库实施：建立数据库</li>
<li>数据库运行和维护</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><ul>
<li>处理要求</li>
<li>信息要求</li>
<li>安全性和完整性要求</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li><p>和用户交流</p>
</li>
<li><p>分析、表达用户需求</p>
<ul>
<li><p>用<strong>数据流图</strong>表达数据和处理之间的关系</p>
<ul>
<li>数据流图(Data Flow Diagram, DFD)：表达系统逻辑功能和数据逻辑流向和逻辑变换<ul>
<li><strong>自顶向下</strong></li>
</ul>
</li>
</ul>
</li>
<li><p>用<strong>数据字典</strong>描述系统中各类数据</p>
<ul>
<li><p>数据字典：对数据进行集中的说明，包含数据元素的名字、含义等。</p>
<ul>
<li>从数据流图中提取原子数据项</li>
<li>把有联系的数据项组合为数据组</li>
</ul>
<blockquote>
<p>上述数据字典和在数据库实施阶段的数据字典<strong>不同</strong>，前者可以看作是现实世界的<strong>数据元素表</strong>，后者是数据库系统的组成部分。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="概念结构设计"><a href="#概念结构设计" class="headerlink" title="概念结构设计"></a>概念结构设计</h2><ul>
<li>概念结构是信息世界的结构，即概念模型。</li>
</ul>
<h3 id="E-R法"><a href="#E-R法" class="headerlink" title="E-R法"></a>E-R法</h3><ul>
<li>描述概念模型</li>
<li>组成部分<ul>
<li>E-R图</li>
<li>转换E-R图为对应的数据模型</li>
</ul>
</li>
</ul>
<h4 id="E-R图概述"><a href="#E-R图概述" class="headerlink" title="E-R图概述"></a>E-R图概述</h4><ul>
<li>组成<ul>
<li>实体（方框）</li>
<li>属性（椭圆框）</li>
<li>联系（菱形框）<ul>
<li>联系也可以有属性，例如学生和课程的选修联系可以拥有成绩属性。</li>
<li>两个实体型之间可以具有多种联系，例如机器和工人可以有使用、维修两种联系。</li>
<li>语义扩充<ul>
<li>存在依赖(<code>E</code>)</li>
<li>标识依赖(<code>E&amp;I</code>)</li>
<li>实体的子类（连线上有一个圈）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="E-R图设计"><a href="#E-R图设计" class="headerlink" title="E-R图设计"></a>E-R图设计</h3><h4 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a>方法</h4><ul>
<li><p>自顶向下</p>
</li>
<li><p>自底向上<strong>（最常用）</strong></p>
<blockquote>
<p>自顶向下需求分析，自底向上概念设计。</p>
</blockquote>
</li>
<li><p>逐步扩张：先定义核心概念结构</p>
</li>
<li><p>混合策略</p>
</li>
</ul>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p>以自底向上为例</p>
<h5 id="数据抽象"><a href="#数据抽象" class="headerlink" title="数据抽象"></a>数据抽象</h5><ul>
<li>分类</li>
<li>聚集：定义某个实体型的组成成分</li>
<li>概括：定义类型之间的子集联系</li>
</ul>
<h5 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h5><ul>
<li><p>设计<strong>局部</strong>E-R图</p>
<ul>
<li><p>选择局部应用</p>
</li>
<li><p>利用数据抽象建立实体模型</p>
</li>
<li><p>确定实体之间的联系</p>
</li>
<li><p>必要调整（属性上升为实体）</p>
<ul>
<li><p>属性规范化（不可分割）：E-R图中属性不能和其他属性有<strong>关系</strong>（包括联系）</p>
</li>
<li><p>一个属性不能和多个实体之间有联系</p>
</li>
<li><p>属性和实体之间应该是“一对一”或者“多对一”的关系，不能“多对多”或者“一对多”。（即实体的某个属性取值是否确定）</p>
<blockquote>
<p>例如学生和课程号可能是“多对多”的关系，因此需要将课程号上升为实体。</p>
<ul>
<li>这里的多对多和<strong>实体</strong>之间的多对多不同，后者是靠<strong>联系</strong>体现的。但前者指<strong>取值的个数</strong>，例如存在一个学生有多门课，那么课程号的取值有多个，即一对多。</li>
</ul>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p>综合<strong>局部</strong>E-R图</p>
<ul>
<li><p>集成</p>
<ul>
<li>一次集成</li>
<li>逐步集成：累加</li>
</ul>
</li>
<li><p>消除冲突</p>
<ul>
<li><p>属性：类型、取值范围、取值单位</p>
<blockquote>
<p>协商讨论</p>
</blockquote>
</li>
<li><p>命名</p>
<blockquote>
<p>建立命名表</p>
</blockquote>
</li>
<li><p>结构</p>
<ul>
<li><p>同一个对象在不同应用中抽象层次不同，例如一个为实体，在另一个中为属性。</p>
<blockquote>
<p>实体上升或属性下降，通常为前者。</p>
</blockquote>
</li>
<li><p>同一个实体在不同应用中描述不同，例如属性个数、次序不同。</p>
<blockquote>
<p>取并集</p>
</blockquote>
</li>
<li><p>联系类型不同</p>
<blockquote>
<p>根据语义综合</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p>消除冗余：集成得到的初步E-R图可能存在<strong>数据冗余</strong>和<strong>联系冗余</strong>，调整过后得到<strong>基本E-R图</strong>。</p>
<ul>
<li>分析法<ul>
<li>重点考察<strong>联系的属性</strong>（可能由其他的属性表示，<strong>不一定成环</strong>）</li>
</ul>
</li>
<li>规范化方法</li>
</ul>
<blockquote>
<p>冗余危害：数据不一致。当某个属性变化时，需要更改所有相关的冗余属性，少改任何一个就会出问题。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="逻辑结构设计"><a href="#逻辑结构设计" class="headerlink" title="逻辑结构设计"></a>逻辑结构设计</h2><ul>
<li><p>把概念模型（E-R图）转换为DBMS支持的数据模型（模式）的过程</p>
</li>
<li><p>任务</p>
<ul>
<li><p>形成初始关系数据库模式：关系</p>
<blockquote>
<p>其他的数据库可能是网状、层次等结构。</p>
</blockquote>
</li>
<li><p>关系模式规范化：特定DBMS支持下的数据模型</p>
</li>
<li><p>关系模式优化</p>
</li>
<li><p>子模式定义（定义外模式）</p>
<blockquote>
<p>模式是很多张表的<strong>规范</strong>（设计表），关系是具体的<strong>数据内容</strong>。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="E-R图与关系模型"><a href="#E-R图与关系模型" class="headerlink" title="E-R图与关系模型"></a>E-R图与关系模型</h3><h4 id="普适转换规则"><a href="#普适转换规则" class="headerlink" title="普适转换规则"></a>普适转换规则</h4><blockquote>
<p>一个关系模式就是一种<strong>数据模型</strong></p>
</blockquote>
<ul>
<li><p>前提：确定每个关系模式的<strong>码</strong></p>
</li>
<li><p>一个实体型转换为一个关系模式</p>
</li>
<li><p>一个联系转换为一个关系模式</p>
<ul>
<li><p><code>1:1</code>：每个实体的码均是该联系的候选码，任意选择一个作为联系模型的主码即可。</p>
<blockquote>
<p><strong>不可以</strong>同时选，因为不满足码的<strong>最小性</strong>。</p>
</blockquote>
</li>
<li><p><code>1:n</code>：关系的码是<strong><code>n</code>端实体</strong>的码</p>
<blockquote>
<ul>
<li><code>n</code>端实体码才有唯一标识作用</li>
<li><strong>不是<code>n</code>端所有实体码的组合</strong></li>
</ul>
</blockquote>
</li>
<li><p><code>m:n</code>：关系的码是<strong>两端所有</strong>实体码的组合</p>
</li>
</ul>
<blockquote>
<ul>
<li>一般只有<code>n:m</code>关系才有属性，其他的联系都可以整合进属性，例如<code>1:n</code>可以在<code>n</code>端实体增加存放<code>1</code>端的码。</li>
<li>只选择一端实体的码<strong>不代表</strong>只存储一端实体的属性</li>
</ul>
</blockquote>
</li>
<li><p>多元联系转换为一个关系模式</p>
</li>
<li><p>具有相同的码的关系可以<strong>合并</strong>。例如消耗关系和零件的码都是零件号，就可以合并为一个关系。</p>
<blockquote>
<p>合并后可能和概念模型E-R图规范不符，但是在逻辑结构设计环节是合法的。</p>
</blockquote>
</li>
</ul>
<h4 id="弱实体"><a href="#弱实体" class="headerlink" title="弱实体"></a>弱实体</h4><p>存在依赖中依赖别的实体的实体</p>
<ul>
<li>为每个弱实体创建新的关系</li>
<li>将<strong>被依赖关系的码</strong>作为新关系的<strong>外码</strong></li>
<li>新关系的主码是<strong>被依赖实体的码</strong>和<strong>自身部分标识属性</strong>的组合</li>
</ul>
<h4 id="超类-子类联系"><a href="#超类-子类联系" class="headerlink" title="超类/子类联系"></a>超类/子类联系</h4><ul>
<li><p>为超类和每个子类创建单独的关系</p>
</li>
<li><p>超类关系中，<strong>包含所有子类共有的属性</strong>，包括<strong>主码</strong>。</p>
</li>
<li><p>在超类中选定属性组作为子类的判定符</p>
</li>
<li><p>子类关系中，包含超类主码以及子类特有的属性。（<strong>没有</strong>共有属性）</p>
<blockquote>
<p>子类使用超类的主码作为自己的主码</p>
</blockquote>
</li>
</ul>
<h3 id="规范化"><a href="#规范化" class="headerlink" title="规范化"></a>规范化</h3><ul>
<li>确定范式等级（通常需要达到3NF）</li>
</ul>
<h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><ul>
<li>模式的合并和分解</li>
<li>关系模式的分解可以提高存取效率和存储空间的利用率</li>
</ul>
<h4 id="水平分解"><a href="#水平分解" class="headerlink" title="水平分解"></a>水平分解</h4><ul>
<li><p>选取操作</p>
</li>
<li><p><code>2-8</code>原则：常使用的部分提取出来作为一个关系</p>
</li>
<li><p>数据分片：根据不相交的事务将关系分解为多个子关系</p>
<blockquote>
<p>事务：一组相对独立的操作</p>
</blockquote>
</li>
<li><p>恢复：并运算</p>
</li>
</ul>
<h4 id="垂直分解"><a href="#垂直分解" class="headerlink" title="垂直分解"></a>垂直分解</h4><ul>
<li><p>投影操作</p>
</li>
<li><p>将经常使用的属性提取出来作为一个子关系模式</p>
</li>
<li><p>垂直分解需要保证<strong>无损连接性</strong>和<strong>保持函数依赖</strong>（能够完全复原关系）</p>
<blockquote>
<p>完全复原的必要条件：垂直分解得到的子关系模式保留了主码</p>
</blockquote>
</li>
<li><p>恢复：连表运算</p>
</li>
</ul>
<h3 id="设计用户子模式"><a href="#设计用户子模式" class="headerlink" title="设计用户子模式"></a>设计用户子模式</h3><ul>
<li>用户需求</li>
<li>具体DBMS的特点，例如MySQL是<code>CREATE VIEW</code>.<ul>
<li>根据不同的用户设置不同的列名</li>
<li>权限管理保证系统的安全性</li>
<li>降低复杂查询的难度</li>
</ul>
</li>
</ul>
<h2 id="物理结构设计"><a href="#物理结构设计" class="headerlink" title="物理结构设计"></a>物理结构设计</h2><ul>
<li>确定数据库的存储结构（内模式）</li>
<li>存取方法</li>
</ul>
<h3 id="存储结构"><a href="#存储结构" class="headerlink" title="存储结构"></a>存储结构</h3><ul>
<li>存放位置<ul>
<li>冷热数据分开存放</li>
<li>数据和日志备份放在<strong>不同的磁盘</strong>上</li>
</ul>
</li>
<li>系统配置<ul>
<li>存储分配参数</li>
<li>物理优化</li>
</ul>
</li>
</ul>
<h3 id="存取方法"><a href="#存取方法" class="headerlink" title="存取方法"></a>存取方法</h3><h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><ul>
<li><p>索引记录/索引项：索引文件的记录</p>
<ul>
<li>索引域：数据文件中属性组的<strong>一个取值</strong></li>
<li>指针：指向索引域对应的磁盘块地址</li>
</ul>
<blockquote>
<p>在MySQL的底层，在发起查询时会先查找记录索引域的数据区，然后确定是否对索引进行查找。</p>
</blockquote>
</li>
<li><p>分类</p>
<ul>
<li>稀疏索引：把所有数据记录按索引值分组，每组设立一个索引项。</li>
<li>稠密索引：为每个记录设置一个索引项，记录的存放是任意的，但是<strong>索引是有序</strong>的。</li>
</ul>
</li>
<li><p>多级索引</p>
<ul>
<li>（排序）二叉树索引</li>
<li>多叉树索引：每个结点有<code>D</code>个值作为分界点，共<code>(D+1)</code>个指针。</li>
<li>平衡树索引：限制每个结点放置的关键字和指针最小/最大个数，从而使所有的叶子结点都在一层。</li>
<li><code>B+</code>树索引（常用）：把树中所有关键字按<strong>递增次序</strong>从左到右安排在叶结点上，并<strong>链接</strong>起来。</li>
</ul>
</li>
<li><p>索引域选择</p>
<ul>
<li>经常被查询的属性</li>
<li>经常作为库函数的参数</li>
<li>经常作为连接属性</li>
</ul>
<blockquote>
<p>索引并非越多越好</p>
</blockquote>
</li>
</ul>
<h4 id="聚集"><a href="#聚集" class="headerlink" title="聚集"></a>聚集</h4><ul>
<li><p>将关系中<strong>某个属性组值相同</strong>的记录集中存放在<strong>连续的物理块</strong>中，可以提高查询速度。</p>
<blockquote>
<p>就像同学院的同学安排在一栋宿舍楼中</p>
</blockquote>
</li>
<li><p><strong>一个</strong>关系<strong>只能</strong>参与<strong>一个</strong>聚集（一个关系只能被存储一次）</p>
</li>
<li><p>选择原则</p>
<ul>
<li>经常进行连接操作的关系</li>
<li>单个关系中经常比较的属性组</li>
<li>关系<strong>属性组值</strong>重复率高的属性组</li>
<li>更新操作较多时<strong>不应该</strong>使用聚集方法</li>
</ul>
</li>
</ul>
<h4 id="HASH文件"><a href="#HASH文件" class="headerlink" title="HASH文件"></a>HASH文件</h4><ul>
<li><p>通过HASH函数将记录关键字转换成地址，并将这个地址作为<strong>记录</strong>的存储地址。</p>
</li>
<li><p>选择原则</p>
<ul>
<li><p>关系大小可预知，并且不变。</p>
<blockquote>
<p>如果大小会变化，DBMS需要提供对应的动态HASH存取方法。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>BUAA Database Theory Lecture, Autumn of 2020.</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/12/Database-Chapter3-SQL/" rel="prev" title="Database-Chapter3-SQL">
      <i class="fa fa-chevron-left"></i> Database-Chapter3-SQL
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/12/Database-Chapter5-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA/" rel="next" title="Database-Chapter5-关系数据理论">
      Database-Chapter5-关系数据理论 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



        </div>
        
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Silence</span>
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  Visitors: <span id="busuanzi_value_site_pv"></span>
</span>
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">|   total: 115.5k words</span>
</div>
  <div class="powered-by">
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  













<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', () => {
    new Valine(Object.assign({
      el  : '#valine-comments',
      path: location.pathname,
    }, {"enable":true,"appId":"GMneVEFPu4TwpvejAPqllWGc-gzGzoHsz","appKey":"5eNvc7SV1dxRT000WSXjRDuD","placeholder":"Just write what you'd like to write.","avatar":"mm","meta":["nick","mail"],"pageSize":10,"language":"en","visitor":false,"comment_count":true,"recordIP":false,"serverURLs":null}
    ));
  }, window.Valine);
});
</script>

</body>
</html>
